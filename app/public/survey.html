<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>Friend finder survey</title>
    </head>
    <body>
        <div class="container col-lg-10">
        <h1>Please fill the survey below!</h1>
        <hr>
        <form>
                <div class="form-group">
                <h3>About you</h3>
                  <label for="exampleFormControlInput1">Name</label>
                  <input type="text" class="form-control" id="name" placeholder="Name">
                    <br>
                  <label for="exampleFormControlInput1">Image link (required)</label>
                  <input type="text" class="form-control" id="imageURL" placeholder="Image URL">
                </div>
                <hr>
                <div class="form-group">
                  <label for="question1">I go out during weekdays.</label>
                  <select class="form-control" id="question1">
                    <option value="empty">Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)></option>
                  </select>
                  <br>
                  <label for="question2">I go out during the weekend.</label>
                  <select class="form-control" id="question2">
                    <option value="empty">Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question3">I like to be alone.</label>
                  <select class="form-control" id="question3">
                    <option value="empty">Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question4">I like rock music.</label>
                  <select class="form-control" id="question4">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question5">I eat mac'n'cheese when I'm sad.</label>
                  <select class="form-control" id="question5">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question6">I want/have a puppy.</label>
                  <select class="form-control" id="question6">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question7">I like to go to gym.</label>
                  <select class="form-control" id="question7">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question8">If someone needs me I can make myself available for moral support.</label>
                  <select class="form-control" id="question8">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question9">You can get my friendship with a few beers.</label>
                  <select class="form-control" id="question9">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                  <br>
                  <label for="question10">I like to wake up early.</label>
                  <select class="form-control" id="question10">
                    <option value="empty" disabled selected>Select option</option>
                    <option value="1">1 (Don't agree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Totally agree)</option>
                  </select>
                </div>
                <button id="submitButton" type="submit" class="btn btn-primary">Submit</button>
              </form>

              <!--modal for showing the match-->

              <div id="myModal" class="modal">

                    <div class="modal-content">
                      <span id="modalClose" class="close">&times;</span>
                      <h3>Your new best friend is: </h3>
                      <br>
                      <h4 id="newBestFriendName"></h4>
                      <br>
                      <img src="#" id="newBestFriendPhoto">
                    </div>
                  
              </div>
              <style>
                  #myModal {
                    display: none; /* Hidden by default */
                    position: fixed; /* Stay in place */
                    z-index: 1; /* Sit on top */
                    left: 0;
                    top: 0;
                    width: 100%; /* Full width */
                    height: 100%; /* Full height */
                    overflow: auto; /* Enable scroll if needed */
                    background-color: rgb(0,0,0); /* Fallback color */
                    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
                }
                .modal-content {
                    background-color: #fefefe;
                    margin: 15% auto; /* 15% from the top and centered */
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%; /* Could be more or less, depending on screen size */
                }
                #newBestFriendPhoto {
                    width: 30%;
                    margin-left: 33%;
                }
              </style>
        </div>


    </body>
</html>

<script type="text/javascript">
    $("#submitButton").click(function(event){
        event.preventDefault();
        //alert("you pressed the button!")
        //checking if the form is filled
        var filled = true;

        if($("#name").val() === "" || $("#imageURL") === "")
        {
            filled = false;
        }
        else if($("#question1").val() === "empty" || $("#question2").val() === "empty" || $("#question3").val() === "empty" || $("#question4").val() === "empty" || $("#question5").val() === "empty" || $("#question6").val() === "empty" || $("#question7").val() === "empty" || $("#question8").val() === "empty" || $("#question9").val() === "empty" || $("#question10").val() === "empty" )
        {
            filled = false;
            //alert("not filled")
        }

        if(filled === true)
        {
            var newPerson = {
                name: $("#name").val().trim(),
                photo: $("#imageURL").val().trim(),
                scores: [
                    $("#question1").val(),
                    $("#question2").val(),
                    $("#question3").val(),
                    $("#question4").val(),
                    $("#question5").val(),
                    $("#question6").val(),
                    $("#question7").val(),
                    $("#question8").val(),
                    $("#question9").val(),
                    $("#question10").val(),
                ] 
            };

            var currentURL = window.location.origin;
            $.post(currentURL + "/api/friends", newPerson, function(data){
                $("#myModal").css("display", "block");
                $("#newBestFriendName").text(data.name);
                $("#newBestFriendPhoto").attr("src", data.photo);
            })

            $("#modalClose").click(function(){
                $("#myModal").css("display", "none");
            })



        }
        else
        {
            alert("Please fill the form completely!");
        }
        
    });



</script>